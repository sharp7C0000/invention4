<div ng-controller="AdminAccountSettingDialog">

  <paper-action-dialog backdrop autoCloseDisabled layered="false"
    id="admin-account-setting-dialog"
    heading="Account Setting"
    closeSelector="[force-close]"
    ng-cloak
  >

    <paper-input-decorator
      name="paper-input-decorator"
      label="Username"
      floatingLabel
    >
      <input ng-model="username" name="username" is="paper-input" readonly>
    </paper-input-decorator>

    <form name="accountSettingForm">

      <fieldset>

        <legend>
          <div class="title">Change Password</div>
          &nbsp;&nbsp;
          <paper-button ng-click="submitForm('/admin/account/update/password')" class="primary" role="button" tabindex="0">
            <core-icon icon="check"></core-icon>&nbsp;SAVE
          </paper-button>
        </legend>

        <div class="form-body">

          <paper-input-decorator
            name="paper-input-decorator"
            label="Old Password"
            error="{{errorMessage(accountSettingForm.oldPassword.$error)}}"
            isInvalid="{{!accountSettingForm.oldPassword.$valid && accountSettingForm.oldPassword.$dirty}}"
          >
            <input name="oldPassword" is="paper-input"
              type="password"
              required
              ng-model="formData.oldPassword"
              ng-maxlength="10"
              ng-minlength="4"
              ng-keydown="hideGlobalValidation()"
            >
          </paper-input-decorator>

          <paper-input-decorator
            name="paper-input-decorator"
            label="New Password"
            error="{{errorMessage(accountSettingForm.newPassword.$error)}}"
            isInvalid="{{!accountSettingForm.newPassword.$valid && accountSettingForm.newPassword.$dirty}}"
          >
            <input name="newPassword" is="paper-input"
              type="password"
              required
              ng-model="formData.newPassword"
              ng-change="checkNewPasswordMathing()"
              ng-maxlength="10"
              ng-minlength="4"
              ng-keydown="hideGlobalValidation()"
            >
          </paper-input-decorator>

          <paper-input-decorator
            name="paper-input-decorator"
            label="Confirm Password"
            error="{{errorMessage(accountSettingForm.repeatPassword.$error)}}"
            isInvalid="{{!accountSettingForm.repeatPassword.$valid && accountSettingForm.repeatPassword.$dirty}}"
          >
            <input name="repeatPassword" is="paper-input"
              type="password"
              required
              ng-model="formData.repeatPassword"
              ng-change="checkNewPasswordMathing()"
              ng-keydown="hideGlobalValidation()"
            >
          </paper-input-decorator>

          <paper-shadow
            class="form-alert"
            z="1"
            ng-cloak
            ng-show="saveSuccess"
          >
            <core-icon icon="check-circle"></core-icon>
            Successfuly saved!
          </paper-shadow>

          <paper-shadow
            class="global-validator"
            z="1"
            ng-cloak
            ng-show="formData.valid.global"
          >
            <core-icon icon="report-problem"></core-icon>
            {{formData.error.global}}
          </paper-shadow>

        </div>

      </fieldset>

    </form>

    <paper-button force-close affirmative>close</paper-button>

  </paper-action-dialog>

</div>
